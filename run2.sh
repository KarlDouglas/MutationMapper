#!/bin/bash
pwd; hostname; date

#Create enviroment
export CONDA_PKGS_DIRS=~/modi_mount/conda_dir
source $CONDA_DIR/etc/profile.d/conda.sh
conda activate DLC
conda activate DLC
if [ $? != 0 ]; then
conda create -n DLC -y python=3.8
conda activate DLC
fi

conda install -c bioconda bowtie2

# run pipeline
bowtie2-build -c ATGTCTGCCCCTAAGAAGATCGTCGTTTTGCCAGGTGACCACGTTGGTCAAGAAATCACAGCCGAAGCCATTAAGGTTCTTAAAGCTATTTCTGATGTTCGTTCCAATGTCAAGTTCGATTTCGAAAATCATTTAATTGGTGGTGCTGCTATCGATGCTACAGGTGTTCCACTTCCAGATGAGGCGCTGGAAGCCTCCAAGAAGGCTGATGCCGTTTTGTTAGGTGCTGTGGGTGGTCCTAAATGGGGTACCGGTAGTGTTAGACCTGAACAAGGTTTACTAAAAATCCGTAAAGAACTTCAATTGTACGCCAACTTAAGACCATGTAACTTTGCATCCGACTCTCTTTTAGACTTATCTCCAATCAAGCCACAATTTGCTAAAGGTACTGACTTCGTTGTTGTCAGAGAATTAGTGGGAGGTATTTACTTTGGTAAGAGAAAGGAAGACGATGGTGATGGTGTCGCTTGGGATAGTGAACAATACACCGTTCCAGAAGTGCAAAGAATCACAAGAATGGCCGCTTTCATGGCCCTATAGCATGAGCCACCATTGCCTATTTGGTCCTTGGATAAAGCTAATGTTTTGGCCTCTTCAAGATTATGGAGAAAAACTGTGGAGGAAACCATCAAGAACGAATTCCCTACATTGAAGGTTCAACATCAATTGATTGATTCTGCCGCCATGATCCTAGTTAAGAACCCAACCCACCTAAATGGTATTATAATCACCAGCAACATGTTTGGTGATATCATCTCCGATGAAGCCTCCGTTATCCCAGGTTCCTTGGGTTTGTTGCCATCTGCGTCCTTGGCCTCTTTGCCAGACAAGAACACCGCATTTGGTTTGTACGAACCATGCCACGGTTCTGCTCCAGATTTGCCAAAGAATAAGGTCAACCCTATCGCCACTATCTTGTCTGCTGCAATGATGTTGAAATTGTCATTGAACTTGCCTGAAGAAGGTAAGGCCATTGAAGATGCAGTTAAAAAGGTTTTGGATGCAGGTATCAGAACTGGTGATTTAGGTGGTTCCAACAGTACCACCGAAGTCGGTGATGCTGTCGCCGAAGAAGTTAAGAAAATCCTTGCTTAA leu2TAG

python commands.py
bowtie2 -x leu2TAG -r BC1_sorted -S BC1_aligned --no-unal --np 0 -L 20 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC2_sorted -S BC2_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC3_sorted -S BC3_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC4_sorted -S BC4_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC5_sorted -S BC5_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC6_sorted -S BC6_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC7_sorted -S BC7_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC8_sorted -S BC8_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC9_sorted -S BC9_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
bowtie2 -x leu2TAG -r BC10_sorted -S BC10_aligned --no-unal --np 0 -L 10 -N 1 --no-hd
python commands2.py
rm -rf data # clears the directory with data
mkdir data # makes a directory to store the data
find /home/ptc872_ku_dk/modi_mount/Seq_analysis -iname '*.png' -exec mv '{}' /home/ptc872_ku_dk/modi_mount/Seq_analysis/data \; #find all .png files and stores in data

date
